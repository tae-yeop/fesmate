# 콘텐츠 필터링 시스템

> 글 작성 시 스팸, 금지어, 의심스러운 링크를 필터링하는 시스템

---

## 개요

PostComposer에서 글 작성 시 자동으로 콘텐츠를 검증합니다.

- **금지어 필터**: 욕설, 혐오표현, 사기 의심 문구 감지
- **링크 필터**: 차단 도메인, 단축 URL 감지
- **Rate Limit**: 연속 작성 제한 (별도 문서 참고)

---

## 금지어 목록

> **우회 패턴 대응**: 모든 금지어는 구분자(`.`, `·`, `-`, `_`, 공백)를 포함해도 감지됩니다.
> 예: "병.신", "계·좌·이·체", "선-입-금" 등 모두 감지

### 차단 (block) - 작성 불가

| 카테고리 | 패턴 | 설명 |
|---------|------|------|
| profanity | 시발, 씨발, 병신, 지랄, 개새끼, 좆, fuck | 욕설 |
| hate | 한남, 한녀, 틀딱, 급식충 | 혐오 표현 |
| adult | 섹스, 야동, 포르노 | 성인 콘텐츠 |

### 경고 (warn) - 경고 후 다시 클릭하면 게시 가능

| 카테고리 | 패턴 | 설명 |
|---------|------|------|
| spam | 카톡.*문의 | 카톡 문의 유도 |
| spam | 텔레.*그램 | 텔레그램 유도 |
| spam | 무료 나눔 | 무료 나눔 스팸 |
| spam | 선착순.*한정 | 한정판 스팸 |
| scam | **선입금** | 사기 의심 |
| scam | **계좌 이체** | 사기 의심 |
| scam | **입금 확인** | 사기 의심 |
| scam | **안전결제** | 사기 의심 |
| scam | 먼저.*보내 | 사기 의심 |
| scam | 송금.*먼저 | 사기 의심 |

---

## 링크 필터링

### 화이트리스트 (허용)

| 카테고리 | 도메인 |
|---------|--------|
| 예매처 | interpark.com, ticket.melon.com, tickets.yes24.com, ticketlink.co.kr |
| SNS | instagram.com, twitter.com, x.com, youtube.com, youtu.be |
| 지도 | map.kakao.com, map.naver.com, maps.google.com |
| 기타 | naver.com, daum.net, kakao.com |

### 단축 URL (차단)

| 도메인 |
|--------|
| bit.ly, tinyurl.com, goo.gl, t.co, ow.ly, is.gd, buff.ly, me2.do, vo.la |

> 단축 URL은 피싱/사기 방지를 위해 **차단**됩니다. 원본 URL을 사용해주세요.

### 차단 도메인

현재 비어있음. 악성 사이트 발견 시 추가 예정.

---

## 테스트 방법

### 1. 금지어 필터 테스트

**차단 테스트**:
1. 글 작성 → 내용에 "병신" 입력
2. 올리기 클릭
3. **빨간색 에러**: "부적절한 내용으로 인해 작성할 수 없습니다"

**경고 테스트**:
1. 글 작성 → 내용에 "선입금 필요합니다" 입력
2. 올리기 클릭
3. **주황색 경고**: "부적절한 내용이 포함되어 있을 수 있습니다"
4. **다시 올리기 클릭 → 게시됨**

### 2. 링크 필터 테스트

**단축 URL 차단**:
1. 글 작성 → 내용에 `https://bit.ly/abc123` 입력
2. 올리기 클릭
3. **빨간색 에러**: "허용되지 않는 링크가 포함되어 있습니다"

**영상 글 링크 검증**:
1. 글 타입 → "영상" 선택
2. 영상 링크 필드에 `https://bit.ly/abc123` 입력
3. 올리기 클릭
4. **빨간색 에러**: "허용되지 않는 링크가 포함되어 있습니다"

**허용 링크**:
1. 글 작성 → 내용에 `https://www.youtube.com/watch?v=xxx` 입력
2. 정상 게시됨

---

## 관련 파일

- [src/types/content-filter.ts](../../src/types/content-filter.ts) - 타입 정의 및 금지어 목록
- [src/lib/content-filter.ts](../../src/lib/content-filter.ts) - 필터링 로직
- [src/components/posts/PostComposer.tsx](../../src/components/posts/PostComposer.tsx) - UI 통합

---

## 확장 계획

1. **관리자 페이지**: 금지어 목록 실시간 관리
2. **AI 필터**: 문맥 기반 스팸 감지
3. **사용자 신고 연동**: 신고 데이터 기반 패턴 추가
4. **다국어 지원**: 영어 금지어 추가
