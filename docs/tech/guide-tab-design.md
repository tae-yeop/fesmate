# 가이드 탭 설계 (Guide Tab Design)

> 콘서트/뮤지컬/클래식/전시 등 다양한 이벤트 유형을 지원하는 범용 가이드 시스템

## 개요

"가이드" 탭은 이벤트 유형에 관계없이 관람 준비에 필요한 정보를 제공하는 탭입니다.
MVP에서는 콘서트 중심(호응법/콜가이드)으로 시작하되, 향후 뮤지컬/클래식/전시로 확장 가능한 구조로 설계합니다.

## 네비게이션 구조

```
홈 | 탐색 | 커뮤니티 | 가이드 | MyFes
                       ↓
        ┌─────────────────────────────┐
        │ 🔍 검색                      │
        ├─────────────────────────────┤
        │ 📣 호응법 (콘서트)            │
        │ 🎭 관람 가이드 (뮤지컬/클래식) │
        │ 🖼️ 전시 가이드               │
        │ 📝 셋리스트                  │
        │ 👤 출연진                    │
        └─────────────────────────────┘
```

## 이벤트 유형별 콘텐츠

### 콘텐츠 매트릭스

| 카테고리 | 콘서트/페스티벌 | 뮤지컬/연극 | 클래식/오페라 | 전시 |
|----------|----------------|-------------|--------------|------|
| **호응법** | 떼창, 콜, 동작, 점프 | 커튼콜, 기립박수 | 박수 타이밍, 에티켓 | - |
| **출연진** | 아티스트 | 캐스트 | 연주자/지휘자 | 작가 |
| **프로그램** | 셋리스트 | 넘버 목록 | 프로그램 | 작품 목록 |
| **팁** | 굿즈, 응원봉, 좌석 | 좌석 추천, 시야 | 복장, 에티켓 | 동선, 포토존 |

### 이벤트 유형별 특화 기능

#### 콘서트/페스티벌 (MVP)
- **호응법(콜가이드)**: YouTube 동기화, 떼창/동작/점프/박수
- **셋리스트**: 과거 공연 셋리, 예상 셋리
- **아티스트**: 프로필, 팔로우, SNS 링크
- **굿즈 정보**: MD 가격, 사진 (P2)

#### 뮤지컬/연극 (Phase 2)
- **커튼콜 가이드**: 기립박수 타이밍, 앙코르 관례
- **캐스팅**: 날짜별 캐스트 정보
- **넘버 가이드**: 주요 넘버 소개
- **좌석 시야**: 좌석별 시야 사진/리뷰

#### 클래식/오페라 (Phase 3)
- **박수 타이밍**: 악장 간 박수 금지 안내
- **프로그램 노트**: 곡 해설
- **복장 가이드**: 공연장별 드레스코드
- **에티켓**: 입장 시간, 휴대폰 등

#### 전시 (Phase 3)
- **전시 가이드**: 추천 동선, 하이라이트
- **도슨트 시간**: 해설 프로그램 일정
- **포토존**: 사진 촬영 가능 구역
- **작품 해설**: 주요 작품 설명

## 데이터 모델

### 범용 가이드 타입

```typescript
/** 가이드 카테고리 */
type GuideCategory =
  | "response"       // 호응법/콜가이드/커튼콜/박수
  | "program"        // 셋리스트/넘버/프로그램
  | "performer"      // 아티스트/캐스트/연주자
  | "tips";          // 관람 팁

/** 이벤트 유형 */
type EventType =
  | "concert"        // 콘서트/페스티벌
  | "musical"        // 뮤지컬/연극
  | "classical"      // 클래식/오페라
  | "exhibition";    // 전시

/** 가이드 타입 (세부) */
type GuideType =
  // 콘서트
  | "call-guide"      // 호응법 (떼창, 동작 등)
  | "setlist"         // 셋리스트
  | "artist"          // 아티스트 정보
  // 뮤지컬
  | "curtain-call"    // 커튼콜 가이드
  | "cast"            // 캐스팅
  | "number-guide"    // 넘버 가이드
  // 클래식
  | "applause-guide"  // 박수 타이밍
  | "program-note"    // 프로그램 노트
  | "dress-code"      // 복장 가이드
  // 전시
  | "exhibition-guide" // 전시 가이드
  | "docent"          // 도슨트 정보
  // 공통
  | "tips";           // 관람 팁

/** 출연자 (범용) */
interface Performer {
  id: string;
  type: "artist" | "actor" | "musician" | "artist-visual";
  name: string;
  nameEn?: string;
  imageUrl?: string;
  // 타입별 추가 필드
  genres?: string[];           // 아티스트
  roles?: string[];            // 배우 (뮤지컬)
  instruments?: string[];      // 연주자 (클래식)
  socialLinks?: {
    instagram?: string;
    twitter?: string;
    youtube?: string;
  };
}

/** 가이드 (범용 베이스) */
interface GuideBase {
  id: string;
  type: GuideType;
  category: GuideCategory;
  eventType: EventType;
  title: string;
  description?: string;
  // 연결 대상
  performerId?: string;        // 출연자 연결
  workId?: string;             // 작품 연결 (전시)
  eventId?: string;            // 특정 행사 귀속 (선택)
  // 메타데이터
  createdBy: string;
  createdAt: Date;
  updatedAt: Date;
  version: number;
  contributors: string[];
  helpfulCount: number;
  status: "draft" | "published" | "verified";
}

/** 콜가이드 (콘서트 호응법) - 기존 구조 유지 */
interface CallGuide extends GuideBase {
  type: "call-guide";
  category: "response";
  eventType: "concert";
  songId: string;
  song?: Song;
  entries: CallGuideEntry[];
}

/** 커튼콜 가이드 (뮤지컬) */
interface CurtainCallGuide extends GuideBase {
  type: "curtain-call";
  category: "response";
  eventType: "musical";
  showId: string;
  // 커튼콜 구조 (단순화)
  standingOvation: boolean;
  encoreCommon: boolean;
  tips: string[];
}

/** 박수 가이드 (클래식) */
interface ApplauseGuide extends GuideBase {
  type: "applause-guide";
  category: "response";
  eventType: "classical";
  programId: string;
  movements: {
    name: string;
    applauseAllowed: boolean;
    note?: string;
  }[];
  generalEtiquette: string[];
}
```

## 라우팅 구조

### MVP (콘서트 중심)

| 경로 | 설명 |
|------|------|
| `/guide` | 가이드 홈 (아티스트별/인기/최근) |
| `/guide/artist/[id]` | 아티스트 상세 (곡 목록, 콜가이드) |
| `/guide/call/[songId]` | 콜가이드 뷰어 |
| `/guide/call/[songId]/edit` | 콜가이드 에디터 |
| `/guide/setlist/[artistId]` | 아티스트 셋리스트 |

### 확장 (Phase 2+)

| 경로 | 설명 |
|------|------|
| `/guide/musical/[showId]` | 뮤지컬 가이드 (캐스팅, 커튼콜) |
| `/guide/classical/[programId]` | 클래식 가이드 (박수, 프로그램) |
| `/guide/exhibition/[exhibitionId]` | 전시 가이드 (동선, 도슨트) |

## UI 구조

### 가이드 홈 (`/guide`)

```
┌─────────────────────────────────────────────────────┐
│ 🔍 아티스트, 공연, 작품 검색...                       │
├─────────────────────────────────────────────────────┤
│                                                     │
│ 📣 호응법                                           │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐                │
│ │  BTS    │ │NewJeans │ │  IVE    │ ...            │
│ │ 2곡     │ │ 1곡     │ │ 1곡     │                │
│ └─────────┘ └─────────┘ └─────────┘                │
│                                                     │
│ 🔥 인기 가이드                                       │
│ ┌───────────────────────────────────────────────┐  │
│ │ 🎵 Dynamite - BTS                             │  │
│ │    기여자 5명 · 도움됨 234                      │  │
│ └───────────────────────────────────────────────┘  │
│ ┌───────────────────────────────────────────────┐  │
│ │ 🎵 Haru Haru - BIGBANG                        │  │
│ │    기여자 5명 · 도움됨 567                      │  │
│ └───────────────────────────────────────────────┘  │
│                                                     │
│ ⏱️ 최근 수정                                        │
│ ...                                                 │
└─────────────────────────────────────────────────────┘
```

### 아티스트 상세 (`/guide/artist/[id]`)

```
┌─────────────────────────────────────────────────────┐
│ ← 아티스트                                          │
├─────────────────────────────────────────────────────┤
│ ┌─────┐                                            │
│ │ 📷  │ BTS                                        │
│ └─────┘ K-pop · 7인조                              │
│         [팔로우] [인스타] [유튜브]                   │
├─────────────────────────────────────────────────────┤
│ 📣 호응법                                 [+ 곡 추가] │
│ ┌───────────────────────────────────────────────┐  │
│ │ 🎵 Dynamite (3:19)                            │  │
│ │    떼창 5 · 동작 2 · 점프 1                    │  │
│ │    [▶ 보기] [✏️ 편집]                         │  │
│ └───────────────────────────────────────────────┘  │
│ ┌───────────────────────────────────────────────┐  │
│ │ 🎵 Butter (2:44)                              │  │
│ │    아직 호응법이 없습니다                       │  │
│ │    [+ 호응법 만들기]                           │  │
│ └───────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────┤
│ 📝 셋리스트                                         │
│ ┌───────────────────────────────────────────────┐  │
│ │ 2024.12.01 서울 콘서트                         │  │
│ │ 2024.11.15 부산 콘서트                         │  │
│ └───────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────┤
│ 📅 예정 공연                                        │
│ ┌───────────────────────────────────────────────┐  │
│ │ 2025.01.15 록페스티벌 2025                     │  │
│ └───────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────┘
```

## 행사 페이지 연동

### 타임테이블 슬롯에서 가이드 접근

```
┌─────────────────────────────────────────────────────┐
│ 14:00 - 15:00  Main Stage                          │
│ 🎤 BTS                                             │
│ ─────────────────────────────────────────────────  │
│ [ℹ️ 정보] [📣 호응법] [📝 셋리]                      │
└─────────────────────────────────────────────────────┘
           ↓ 클릭
┌─────────────────────────────────────────────────────┐
│ 🎤 BTS 호응법                          [전체 보기 →] │
├─────────────────────────────────────────────────────┤
│ 🎵 Dynamite        기여자 5명 · 도움됨 234          │
│ 🎵 Butter          [+ 호응법 만들기]                │
│ 🎵 Dynamite        기여자 3명 · 도움됨 89           │
└─────────────────────────────────────────────────────┘
```

### 이벤트 유형별 버튼 표시

| 이벤트 유형 | 슬롯 버튼 |
|------------|----------|
| 콘서트/페스티벌 | [📣 호응법] [📝 셋리] |
| 뮤지컬/연극 | [🎭 관람 가이드] [👥 캐스팅] |
| 클래식/오페라 | [👏 박수 가이드] [📋 프로그램] |
| 전시 | [🖼️ 전시 가이드] [🎧 도슨트] |

## 구현 로드맵

### Phase 1: MVP (콘서트 중심)
- [x] 콜가이드 타입/컴포넌트
- [x] 콜가이드 뷰어/에디터
- [ ] **가이드 탭 추가** (네비게이션)
- [ ] 가이드 홈 페이지 (`/guide`)
- [ ] 아티스트 상세 페이지 (`/guide/artist/[id]`)
- [ ] 아티스트 검색/팔로우

### Phase 2: 뮤지컬/연극
- [ ] Performer 타입 확장 (actor)
- [ ] CurtainCallGuide 타입/컴포넌트
- [ ] 캐스팅 정보 페이지
- [ ] 뮤지컬 가이드 페이지

### Phase 3: 클래식/전시
- [ ] ApplauseGuide 타입/컴포넌트
- [ ] ExhibitionGuide 타입/컴포넌트
- [ ] 프로그램 노트 페이지
- [ ] 전시 가이드 페이지

## 마이그레이션 계획

### 기존 콜가이드 → 가이드 시스템

1. **라우팅 변경**
   - `/call-guide/*` → `/guide/call/*` (리다이렉트 설정)

2. **타입 확장**
   - `CallGuide`에 `GuideBase` 필드 추가 (하위 호환)

3. **컴포넌트 재사용**
   - `CallGuideViewer`, `CallGuideEditor`는 그대로 유지
   - 가이드 홈에서 콜가이드 섹션으로 노출

## 관련 문서

- [콜가이드 시스템 (call_guide.md)](./call_guide.md) - 콜가이드 상세 기술 설계
- [콜가이드 UI 디자인 (call-guide-ui-design.md)](./call-guide-ui-design.md) - 재생바 UI/UX
- [콜가이드 모더레이션 (call-guide-moderation.md)](../policy/call-guide-moderation.md) - 악용 방지 정책
